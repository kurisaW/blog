# 【操作系统】管程及霍尔管程

## 一、管程概述

在使用信号量和PV操作实现进程的同步和互斥时，共享资源由于没有统一的管理，很容易会造成程序设计错误。这时候就引入了管程的概念。

管程集中和封装了对相关共享变量和操作的所有访问，将相关的共享资源及操作集中在一起进行统一的管理和控制。

* 基本思想：将分散在各个进程中的临界区集中管理，并将共享资源用数据结构抽象的表示。其中，代表资源的数据结构及并发进程在其上执行的一组过程就构成了管程。
* 管程被请求或被释放资源进程所调用，实质上是将临界区集中在抽象数据类型模板中，以便监视进程的同步操作。
* 管程提供一种互斥机制，使进程可以互斥的调用管程中的过程。

## 二、管程的结构定义
```
TYPE<管程名>=MONITOR
	<管程变量说明>；
	define<(能被其他模块引用的)过程名列表>；
	use<(要引用的模块外定义的)过程名列表>；
procedure<过程名>(<形式参数表>)
{
	<过程体>；
}
procedure<过程名>(<形式参数表>)
{
	<过程体>；
}
<管程的局部数据初始化语句>；
...
```
## 三、条件变量
需要说明的是，虽然管程提供了实现互斥的一个简单途径，但是并没有提供进程能够与其他进程通信或同步的手段。因此引入了条件变量的概念。
#### 1.概念
> 条件变量是出现在管程内的一种`数据结构`，且只有在管程中才能被访问。

#### 2.作用
> 当调用管程过程的进程无法运行时，用于阻塞进程的信号量。（全局性）

#### 3.原理
> 让`阻塞进程`暂时放弃管程控制权，在适当时候在尝试检测管程内状态的变化，以便恢复阻塞进程执行
> 
#### 4.操作方法
->（1）wait()操作：使调用进程阻塞
->（2）signal()操作：唤醒（释放）在条件变量上阻塞的进程。

## 四、霍尔管程
#### 1.引入原因
由于条件变量中的wait操作和signal操作，