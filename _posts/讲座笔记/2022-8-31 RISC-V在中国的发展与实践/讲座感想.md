## 一、前言

简单来说，指令集就是[CPU](https://m.elecfans.com/article/645277.html)能看得懂的语音，可以称之为机器语言。

CPU指令集主要包括CISC（复杂指令集）和[RISC](https://www.elecfans.com/tags/risc/)（精简指令集）。



世界上有两种指令集，私有指令集和开源指令集。

私有指令集，就是你能够知道指令集所有细节，但是不能设计基于此指令集的商用处理器。

开源指令集，就是你能够知道指令集所有细节，但也可以设计基于此指令集的商用处理器。



谈到目前的四大主流指令集：X86、ARM、RISC-V、MIPS

其中X86作为CISC指令集的代表，而ARM、RISC-V、MIPS则作为RISC指令集的代表

![img](https://raw.githubusercontent.com/kurisaW/picbed/main/img/202208312154384.png)



![image-20220831200557280](https://raw.githubusercontent.com/kurisaW/picbed/main/img/202208312005040.png)

谈到指令集的发展，在1980年前后，几乎所有的新处理器设计都在按照CISC的路线发展，惯性的车轮越滚越远，CISC不断加入新的指令，使用微码（微指令），试图在指令集架构层面对高层编程语言提供更直接的支持，这也使得硬件研发成本的不断提高，研发周期变长，CISC的弊端日益凸显。

来自IBM研究院的John Cocke首先意识到，更加精简清爽的指令集设计有助于减少硬件开发难度和成本，同时也有利于编译器进行代码优化工作。于是在1975年，John Cocke领导的IBM 801项目中开始了第一次对RISC概念的实践，在此过程中，也有一些科学家也是逐渐认清CISC的弱点，其中，任教于伯克利的David Patterson也决定在自己的研究生涯中验证自己的想法，并带领学生尝试构建一个指令集精简化的微控制器。在1983年，David Patterson在伯克利大学正式发布RISC Ⅰ和RISC Ⅱ，并在ISSCC大会（誉为芯片界的“世界奥林匹克大会”）中进行展示，奠定了RISC精简指令集的地位。

“我们认为，基于RISC理念设计的处理器只有在极少数情况下慢于CISC处理器……过多的指令使得CISC处理器的控制逻辑复杂……研发成本上升……编译器也不知道该如何利用这么复杂的指令集……CISC的设计思路应当反思。” —— RISC的早期倡导者之一，David Patterson

SPARC（斯帕克）

DEC Alpha（阿尔法）

## 二、RISC-V



资料参考：[CPU架构之争：RISC的诞生与发展缩影](https://blog.sciencenet.cn/blog-414166-763326.html)

## 三、RT-Thread

https://www.21ic.com/article/704094.html

近年来，物联网(Internet Of Things，IoT)概念广为普及，物联网市场发展迅猛，嵌入式设备的联网已是大势所趋。终端联网使得软件复杂性大幅增加，传统的 RTOS 内核已经越来越难满足市场的需求，在这种情况下，物联网操作系统(IoT OS)的概念应运而生。物联网操作系统是指以操作系统内核(可以是 RTOS、Linux 等)为基础，包括如文件系统、图形库等较为完整的中间件组件，具备低功耗、安全、通信协议支持和云端连接能力的软件平台，RT-Thread 就是一个 IoT OS。

RT-Thread 与其他很多 RTOS 如 FreeRTOS、uC/OS 的主要区别之一是，它不仅仅是一个实时内核，还具备丰富的中间层组件

资料参考：[RT-Thread底层汇编及在arm与riscv上的差异](https://www.bilibili.com/video/BV1EL4y1T7sS?spm_id_from=333.337.search-card.all.click&vd_source=7de393144f462a4eade54292bd598c34)

## 四、ARM&&RISC-V

#### ARM与RISC-V的区别

ARM架构和RISC-V架构都源自1980年代的精简指令计算机RISC，两者最大的不同就在于其推崇的大道至简的技术风格和彻底开放的模式。

ARM是一种封闭的指令集架构，众多只用ARM架构的厂商，只能根据自身需求，调整产品频率和功耗，不得改变原有设计，经过几十年的发展演变，CPU架构变得极为复杂和冗繁，ARM架构文档长达数千页，指令数目复杂，版本众多，彼此之间既不兼容，也不支持模块化，并且存在着高昂的专利和架构授权问题。

反观RISC-V，在设计之初，就定位为是一种完全开源的架构，规避了计算机体系几十年发展的弯路，架构文档只有二百多页，基本指令数目仅40多条，同时一套指令集支持所有架构，模块化使得用户可根据需求自由定制，配置不同的指令子集。

#### RISC-V相对于ARM架构的优势和劣势

**1.优势**

RISC-V是一种开放的架构，从历史的经验来看，开放的生态一定会比封闭的好。RISC-V技术是后发技术，所以能够总结前人的经验教训，做到相对简洁和干净。

**2.劣势**

由于RISC-V诞生时间太短，相关的编译器、开发工具和软件开发环境（IDE）以及其它生态要素还在发展。目前RISC-V具有全套开源免费的编译器、开发工具和软件开发环境，这是RISC-V的巨大优势，但是开源版本相比ARM的商用编译器和IDE而言，还颇有差距。

#### ARM与RISC-V的竞争

目前ARM占据了以移动设备为代表的处理器IP的绝大部分市场，而RISC-V则是后起之秀。ARM与RISC-V的竞争有点像上世纪末的Windows和Linux之争，ARM和RISC-V的未来竞争格局也可能类似。

首先几乎可以肯定的是，在ARM的传统优势领域，即手机领域，RISC-V基本没有机会，因为手机经过十年迭代后不太会彻底改变处理器内核了，这也和目前Windows经过二十多年风雨仍然是PC市场操作系统龙头老大一样。但是，在新兴的领域，RISC-V和ARM都处于同一起跑线上，而RISC-V凭着指令集开源等特性很有可能可以击败ARM，或者至少能够占据可观的市场份额。

目前这样的新兴市场主要是物联网市场，物联网市场有长尾化的特性，拥有众多细分市场，同时对于功耗有很高的要求，因此对于可以针对不同应用灵活修改指令集和芯片架构设计的RISC-V有优势，相比之下使用ARM往往只能做一个标准化设计，很难实现差异化。此外，物联网市场对于成本较敏感，RISC-V免费授权的特点对于芯片厂商也很重要。

在RISC-V基金会名单中，我们可以看到高通、联发科这样重点布局物联网的企业。而在目前很火的AI芯片市场，ARM和RISC-V则尚看不出明显的优劣。这是因为高性能AI芯片中无论是使用ARM还是RISC-V的核，主要都是作为控制器来使用，最主要的也是最核心的计算单元往往是电路设计师自行设计而不会使用IP；另一方面AI芯片的利润空间往往较大，因此RISC-V的免费的特点并没有带来特别大的优势。